import {useNavigate} from "react-router-dom";
import styles from "./styles.module.css";
import {useEffect, useState} from "react";
import logo from '../../logo_normal.png';
import * as url from "url";

const Main = () => {
	const navigate = useNavigate();

	const [data, setData] = useState("");


	const navigateToProfile = () => {
		navigate('/userprofile');
	};

	const navigateToProperty = () => {
		navigate('/property');
	};

	const navigateHome = () => {
		navigate('/');
	};

	const navigateToAdmin = () => {
		navigate('/admin');
	};

	useEffect(() => {
		fetch("https://property-system-backend.herokuapp.com/api/users/getuserinfo", {
			headers: {"Content-Type": "application/json"},
			method: "POST",
			body: JSON.stringify({token: localStorage.getItem("token")})
		}).then(response => response.json()).then(data => setData(data));
	}, []);


	const handleLogout = () => {
		localStorage.removeItem("token");
		window.location.reload();
	};

	//Set the page tab title
	useEffect(() => {
		document.title = "West Boca Make-Believe Retirement Community Property System"
	});

	return (
		<div className={styles.main_container}>
			<nav className={styles.navbar}>
				<img id={styles.logo} src={logo}/>
				<h1>West Boca Make-Believe Retirement Community</h1>
				<div className={styles.buttons}>
					<button className={styles.white_btn} onClick={navigateHome}>
						Home
					</button>
					<button className={styles.white_btn} onClick={navigateToProperty}>
						Property
					</button>
					<button className={styles.white_btn} onClick={navigateToProfile}>
						Profile
					</button>
					<button hidden={!data.isAdmin} className={styles.white_btn} onClick={navigateToAdmin}>
						Admin
					</button>
					<button className={styles.white_btn} id={styles.red_hover} onClick={handleLogout}>
						Logout
					</button>
				</div>
			</nav>
			<div className={styles.intro_section}>
				<div id={styles.intro_textbox}>
					<h2>Come Home To Exceptional Senior Living.</h2>
					<p>Providing a safe and secure property system while you enjoy your stay at West Boca Make-Believe
						Retirement Community!</p>
				</div>
			</div>
			<div className={styles.about_us_row}>
				<div className={styles.about_us}>
					<h1>Welcome to West Boca Make-Believe Retirement Community</h1>
					<h2>A place for everyone!</h2>
					<p>
						Serving West Boca and surrounding communities,
						West Boca Make-Believe Retirement Community enhances the well-being of
						South Florida seniors by educating and advocating
						on their behalf, and by providing health care and supportive
						services that meet their physical, emotional, social and
						psychological needs. We are everything you love about your
						neighbors and community wrapped up in one great,
						easy-to-get-to center.
					</p>
				</div>
				<div className={styles.about_us}>
					<h1>Safe property management for all members of our community</h1>
					<h2>A secure and safe system.</h2>
					<p>
						Here at the West Boca Make-Believe Retirement Community
						we offer a state-of-the-art property management system
						to ensure all your belongings and personal items are kept
						safe and are properly tracked while you enjoy your stay
						at our community. If you feel like you want to add
						family or friends to view your property you can!
						Enjoy your stay at the West Boca Make-Believe Retirement
						Community.
					</p>
				</div>
			</div>
			<footer>
				<h1>All rights reserved Â© Copyright 2022, West Boca Make-Believe Retirement Community</h1>
			</footer>
		</div>
	);
};

export default Main;
